{"ast":null,"code":"var _jsxFileName = \"/Users/kitan/Documents/CODING/group-chat-react-project/group-chat-react/src/Chatroom/ChatRoom.js\",\n    _s = $RefreshSig$();\n\nimport './chatroom.css';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\nimport React, { useState, useEffect } from 'react';\nimport io from 'socket.io-client';\nimport ChatMessage from './ChatMessage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Chat(props) {\n  _s();\n\n  const [roomCode, setRoomCode] = useState(\"\");\n  const [room, setRoom] = useState(true);\n  const [messages, setMessages] = useState([{\n    id: \"2\",\n    text: 'heyyyo'\n  }]);\n  const [isAdmin, setIsAdmin] = useState(false);\n  let id = 0; //const socket = props.socket;\n\n  useEffect(() => {\n    const socket = io(\"http://192.168.1.9:3000\", {\n      transport: ['websocket']\n    });\n    let roomCode_ = localStorage.getItem(\"room-code\");\n    let isAdmin_ = localStorage.getItem('create-room');\n    let roomName_ = localStorage.getItem(\"room-name\");\n    let userName_ = localStorage.getItem(\"user-name\");\n    let room_ = {\n      name: roomName_,\n      admin: userName_,\n      password: \"xxx\",\n      code: roomCode_\n    };\n    if (isAdmin_) setIsAdmin(true);\n    setRoomCode(roomCode_);\n    socket.on('connect', connection => {\n      if (isAdmin) socket.emit('create-room', roomCode_);else socket.emit('join-room', roomCode_);\n      socket.on('backlog-messages', messages_ => {\n        let newM = [...messages, ...messages_];\n        console.log(newM);\n        setMessages(newM); //TODO: update the list of users had\n      });\n      socket.on('broadcasted-message', message => {\n        setMessages([...messages, message]); //TODO: update the list of users had\n      });\n    });\n  }, []);\n\n  function query_params(queryString) {\n    var queryParts = queryString.split('?');\n    var pairsString;\n    var query = {};\n    console.log(queryParts);\n    if (queryParts.length > 1) pairsString = queryParts[1].split('=');\n    console.log(pairsString);\n    let i = 0;\n\n    while (i < pairsString.length) {\n      query[pairsString[i]] = pairsString[i + 1];\n      i += 2;\n    }\n\n    console.log(query);\n    return query;\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    class: \"root\",\n    children: messages && room ? /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"chatroom-view\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"title-view\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          class: \"title-text\",\n          children: room.room_name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"chatroom-messages-view\",\n        children: [/*#__PURE__*/_jsxDEV(ChatMessage, {\n          text: \"Hi, Sweet! So, what do you wanna do today?Sweet! \",\n          userName: \"name\",\n          isUser: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ChatMessage, {\n          text: \"Hi, Sweet! So, what do you wanna do today?Sweet! \",\n          userName: \"name\",\n          isUser: false\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ChatMessage, {\n          text: \"Hi, Sweet! So, what do you wanna do today?Sweet! \",\n          userName: \"name\",\n          isUser: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(ChatMessage, {\n          text: \"Hi, Sweet! So, what do you wanna do today?Sweet! \",\n          userName: \"name\",\n          isUser: false\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ChatMessage, {\n          text: \"Hi, Sweet! So, what do you wanna do today?Sweet! \",\n          userName: \"name\",\n          isUser: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 33\n        }, this), messages ? messages.map(msg => {\n          /*#__PURE__*/\n          _jsxDEV(ChatMessage, {\n            text: msg.text,\n            userName: \"\",\n            isUser: false\n          }, msg.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this);\n        }) : null, messages ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: messages.map(msg => /*#__PURE__*/_jsxDEV(ChatMessage, {\n            text: msg.text,\n            userName: \"\",\n            isUser: false\n          }, msg.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 37\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 13\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"typed-message-view\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          class: \"typed-message-input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n          class: \"material-icons send-message-btn\",\n          children: \"\\uE163\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 56\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }, this) : null\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Chat, \"qZnW6cnzxeAOAQ0CJn5WxZFhKIo=\");\n\n_c = Chat;\nexport default Chat;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"sources":["/Users/kitan/Documents/CODING/group-chat-react-project/group-chat-react/src/Chatroom/ChatRoom.js"],"names":["useAuthState","useCollectionData","React","useState","useEffect","io","ChatMessage","Chat","props","roomCode","setRoomCode","room","setRoom","messages","setMessages","id","text","isAdmin","setIsAdmin","socket","transport","roomCode_","localStorage","getItem","isAdmin_","roomName_","userName_","room_","name","admin","password","code","on","connection","emit","messages_","newM","console","log","message","query_params","queryString","queryParts","split","pairsString","query","length","i","room_name","map","msg"],"mappings":"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","sourcesContent":["import './chatroom.css';\n\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\nimport React, { useState,  useEffect} from 'react';\nimport io from 'socket.io-client';\n\n\nimport ChatMessage from './ChatMessage';\n\n\n\n\n\nfunction Chat(props) {\n\n    const [roomCode, setRoomCode] = useState(\"\")\n    const [room, setRoom] = useState(true)\n    const [messages, setMessages] = useState([{id:\"2\", text:'heyyyo'}])\n    const [isAdmin, setIsAdmin] = useState(false)\n    let id = 0;\n    //const socket = props.socket;\n\n\n    useEffect(() => {\n\n        const socket = io(\"http://192.168.1.9:3000\", { transport: ['websocket']}) ;\n\n        let roomCode_ = localStorage.getItem(\"room-code\")\n        let isAdmin_ = localStorage.getItem('create-room')\n        let roomName_ = localStorage.getItem(\"room-name\")\n        let userName_ = localStorage.getItem(\"user-name\")\n        let room_ = {\n            name:roomName_,\n            admin: userName_,\n            password:\"xxx\",\n            code: roomCode_\n        }\n\n        if(isAdmin_)setIsAdmin(true)\n        setRoomCode(roomCode_)\n        \n\n        socket.on('connect', (connection) => {\n            \n            if(isAdmin)socket.emit('create-room', roomCode_)\n            else socket.emit('join-room', roomCode_)\n\n\n            socket.on('backlog-messages', (messages_) => {\n\n                let newM = [...messages, ...messages_];\n                console.log(newM)\n                setMessages(newM)\n              //TODO: update the list of users had\n            });\n\n            socket.on('broadcasted-message', (message) => {\n\n                setMessages([...messages, message])\n              //TODO: update the list of users had\n            });\n      });\n\n\n        \n    }, []);\n    \n\n\n\n    function query_params(queryString){\n        \n        var queryParts = queryString.split('?')\n        var pairsString;\n        var query = {}\n\n        console.log(queryParts)\n        if(queryParts.length > 1) pairsString = queryParts[1].split('=');\n        console.log(pairsString)\n\n        let i=0;\n        while(i <pairsString.length){\n            query[pairsString[i]] = pairsString[i+1]\n            i+=2;\n        }\n        console.log(query)\n\n        return query\n    }\n\n    \n\n\n\n\n  \n\n  return (\n    <div class=\"root\">\n    {messages && room?\n        <div class=\"chatroom-view\">\n        <div class=\"title-view\">\n            <p class=\"title-text\">{room.room_name}</p>\n        </div>\n        <div class=\"chatroom-messages-view\">\n            <ChatMessage\n                text={\"Hi, Sweet! So, what do you wanna do today?Sweet! \"}\n                userName=\"name\"\n                isUser={true}\n            ></ChatMessage>\n            <ChatMessage\n                text={\"Hi, Sweet! So, what do you wanna do today?Sweet! \"}\n                userName=\"name\"\n                isUser={false}\n            ></ChatMessage>\n                    <ChatMessage\n                text={\"Hi, Sweet! So, what do you wanna do today?Sweet! \"}\n                userName=\"name\"\n                isUser={true}\n            ></ChatMessage>\n            <ChatMessage\n                text={\"Hi, Sweet! So, what do you wanna do today?Sweet! \"}\n                userName=\"name\"\n                isUser={false}\n            ></ChatMessage>\n                                <ChatMessage\n                text={\"Hi, Sweet! So, what do you wanna do today?Sweet! \"}\n                userName=\"name\"\n                isUser={true}\n            ></ChatMessage>\n            {messages?\n             messages.map(msg => {\n            <ChatMessage key={msg.id} text={msg.text} userName={\"\"} isUser={false}/>\n            }):null\n        \n            }\n\n            {messages?\n            <div>\n                {messages.map(msg=> <ChatMessage key={msg.id} text={msg.text} userName={\"\"} isUser={false}/>)}\n                </div>\n                :null\n            }\n\n         \n           \n     \n        </div>\n        <div class=\"typed-message-view\">\n            <input class=\"typed-message-input\"></input><i class=\"material-icons send-message-btn\">&#xe163;</i>\n\n\n        </div>\n\n    </div>:null\n}\n    </div>\n  );\n}\n\nexport default Chat;\n"]},"metadata":{},"sourceType":"module"}